# 勉強満足度振り返りアプリ

## 概要
日々の勉強時間と満足度を記録し、可視化する個人用アプリです。

## 機能

- 勉強時間の記録（1日に複数回加算可）
- 満足度の記録（1〜5）
- 直近7日間の勉強時間・満足度グラフ表示
- 今週のサマリー表示
  - 今週の勉強時間（合計）
  - 今週の平均満足度（入力がある日のみ）

## 使用技術
- Python
- Streamlit
- matplotlib

## データ構造

- record_id: "YYYY-MM-DD"
- study_hours: float
- satisfaction: int | None
- memo: str | None

## v2で追加した改善
- 日付順にデータをソートして表示
- データが少ない場合はグラフを表示しないガードを追加
- 満足度が未入力の日はグラフに含めない設計

## v3: 週サマリー

- record_id は "YYYY-MM-DD" の文字列
- date.fromisoformat() で date に変換
- isocalendar() で (year, week) を取得
- 今週のデータだけ集計して表示

## v3.1: 入力UI・UX改善

- 勉強時間の入力方法を 数値入力から「時間＋分」選択方式に変更
  - 時間：0〜4時間
  - 分：10分刻み
- 内部では float（hours + minutes / 60）として保存
- Streamlit の rerun 挙動を前提に、session_state を用いた状態管理に変更
- 入力値は保存後に初期値へリセット
- 通知メッセージは表示位置ごとに key を分離
- 朝（勉強時間の加算）／夜（満足度・振り返り）の役割を分けたUI設計
- グラフの軸（y軸）を固定し、データが少ない場合でも見やすい表示に調整

## 設計メモ

- Streamlit は操作ごとにスクリプト全体が再実行されるため、
- イベント（button）と状態（session_state）を分離して設計
- メッセージ表示は一時通知として扱い、表示後に state から削除
